{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "lockFileMaintenance": {
    "enabled": true,
    "recreateWhen": "always",
    "rebaseStalePrs": true,
    "branchTopic": "lock-file-maintenance",
    "commitMessageAction": "Lock file maintenance",
    "schedule": ["before 4am on monday"],
    "groupName": null,
    "prBodyDefinitions": {"Change": "All locks refreshed"}
  },
  "ignoreDeps": ["husky"],
  "labels": ["type: dependencies", "maintenance"],
  "prbodyTemplate": "{{{header}}}{{{table}}}{{{warnings}}}{{{notes}}}{{{changelogs}}}{{{controls}}}{{{footer}}}",
  "prFooter": "Automated PR generated by [Renovate Bot](https://github.com/renovatebot/renovate) based on this [Linchpin Config](https://github.com/linchpin/renovatebot-config)",
  "baseBranches": ["/^maintenance\\/.*/"],
  "packageRules": [
    {
      "commitMessagePrefix": "[Project] Major - ",
      "description": "Only update the build process dependencies when a major or minor update is available.",
      "matchUpdateTypes": ["major"],
      "labels": ["npm", "maintenance", "build"],
      "matchManagers": ["npm"],
      "automerge": false,
      "groupName": "Node/npm Release",
      "matchFileNames": ["package.json"],
      "matchPackageNames": ["!/^node$/", "!/^npm$/", "!/^engines$/"]
    },
    {
      "commitMessagePrefix": "[Project] Minor - ",
      "description": "Update the build process dependencies when a minor, patch, pin, or digest update is available.",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "labels": ["npm", "maintenance", "build"],
      "matchManagers": ["npm"],
      "automerge": false,
      "groupName": "npm Dependencies",
      "matchFileNames": ["package.json"],
      "matchPackageNames": ["!/^node$/", "!/^engines$/"]
    },
    {
      "commitMessagePrefix": "[Project] Major - ",
      "matchUpdateTypes": ["major"],
      "matchManagers": ["composer"],
      "matchPackageNames": ["php", "!/^wpackagist/", "!/^linchpin/"],
      "labels": ["composer", "maintenance", "build"],
      "groupName": "PHP Release",
      "automerge": false,
      "matchFileNames": ["composer.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "matchManagers": ["npm"],
      "labels": ["npm", "wordpress", "themes", "maintenance"],
      "groupName": "Custom Theme(s) npm Dependencies",
      "automerge": false,
      "matchFileNames": ["themes/**/package.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "matchManagers": ["npm"],
      "labels": ["npm", "wordpress", "themes", "maintenance"],
      "groupName": "Custom Theme(s) npm Dependencies",
      "automerge": false,
      "matchFileNames": ["themes/**/package.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "matchManagers": ["npm"],
      "labels": ["npm", "wordpress", "plugins", "maintenance"],
      "groupName": "Custom Plugin(s) npm Dependencies",
      "automerge": false,
      "matchFileNames": ["plugins/**/package.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "matchManagers": ["npm"],
      "labels": ["npm", "wordpress", "plugins", "maintenance"],
      "groupName": "Custom Plugin(s) npm Dependencies",
      "automerge": false,
      "matchFileNames": ["plugins/**/package.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "matchManagers": ["composer"],
      "labels": ["composer", "wordpress", "themes", "maintenance"],
      "groupName": "Custom Theme(s) Composer Dependencies",
      "automerge": false,
      "matchFileNames": ["themes/**/composer.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "matchManagers": ["composer"],
      "labels": ["composer", "wordpress", "themes", "maintenance"],
      "groupName": "Custom Theme(s) Composer Dependencies",
      "automerge": false,
      "matchFileNames": ["themes/**/composer.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "matchManagers": ["composer"],
      "labels": ["composer", "wordpress", "plugins", "maintenance"],
      "groupName": "Custom Plugin(s) Composer Dependencies",
      "automerge": false,
      "matchFileNames": ["plugins/**/composer.json"]
    },
    {
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "matchManagers": ["composer"],
      "labels": ["composer", "wordpress", "plugins", "maintenance"],
      "groupName": "Custom Plugin(s) Composer Dependencies",
      "automerge": false,
      "matchFileNames": ["plugins/**/composer.json"]
    },
    {
      "matchManagers": ["composer"],
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "labels": ["wordpress", "composer", "maintenance", "major"],
      "groupName": "Themes packagist.linchpin.com and wordpress.org",
      "groupSlug": "maintenance-wordpress-themes-major",
      "matchFileNames": ["themes/**/composer.json"],
      "prBodyColumns": ["Package", "Change"],
      "commitBody": "{{#each upgrades as |upgrade|}}update(NO-TASK): {{{depName}}} from `{{{upgrade.currentValue}}}` to `{{{upgrade.newValue}}}`\n{{/each}}",
      "matchPackageNames": [
        "wpackagist-theme{/,}**",
        "linchpin{/,}**"
      ]
    },
    {
      "matchManagers": ["composer"],
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "labels": ["wordpress", "composer", "maintenance", "themes", "minor"],
      "groupName": "Themes packagist.linchpin.com and wordpress.org",
      "matchFileNames": ["composer.json"],
      "prBodyColumns": ["Package", "Change"],
      "commitBody": "{{#each upgrades as |upgrade|}}update(NO-TASK): {{{depName}}} from `{{{upgrade.currentValue}}}` to `{{{upgrade.newValue}}}`\n{{/each}}",
      "matchPackageNames": [
        "wpackagist-theme{/,}**",
        "linchpin{/,}**"
      ]
    },
    {
      "matchManagers": ["composer"],
      "commitMessagePrefix": "[WordPress] Major - ",
      "matchUpdateTypes": ["major"],
      "labels": ["wordpress", "composer", "maintenance"],
      "groupName": "Plugins packagist.linchpin.com and wordpress.org",
      "groupSlug": "maintenance-wordpress-plugins-major",
      "matchFileNames": ["plugins/**/composer.json"],
      "prBodyColumns": ["Package", "Change"],
      "matchPackageNames": [
        "wpackagist-plugin{/,}**",
        "linchpin{/,}**"
      ],
      "commitBody": "{{#each upgrades as |upgrade|}}update(NO-TASK): {{{depName}}} from `{{{upgrade.currentValue}}}` to `{{{upgrade.newValue}}}`\n{{/each}}",
      "commitBodyTable": true
    },
    {
      "matchManagers": ["composer"],
      "commitMessagePrefix": "[WordPress] Minor - ",
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "labels": ["wordpress", "composer", "maintenance", "plugins", "minor"],
      "groupName": "Plugins packagist.linchpin.com and wordpress.org",
      "groupSlug": "maintenance-wordpress-plugins-minor",
      "matchFileNames": ["plugins/**/composer.json"],
      "prBodyColumns": ["Package", "Change"],
      "matchPackageNames": [
        "wpackagist-plugin{/,}**",
        "linchpin{/,}**"
      ],
      "commitBody": "{{#each upgrades as |upgrade|}}update(NO-TASK): {{{depName}}} from `{{{upgrade.currentValue}}}` to `{{{upgrade.newValue}}}`\n{{/each}}",
      "commitBodyTable": true
    }
  ]
}

